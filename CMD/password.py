
import random
import string

Info = {
    "Description": "Generate secure passwords with customizable length and complexity"
}

def execute(message=None, sender_id=None):
    try:
        # Default length
        length = 12
        
        # Parse length from message if provided
        if message and message.strip().isdigit():
            requested_length = int(message.strip())
            if 4 <= requested_length <= 50:
                length = requested_length
            else:
                return """ğŸ” **Password Generator**

âš ï¸ **Invalid length!** 
Please use a length between 4 and 50 characters.

ğŸ“ **Usage:** `/password [length]`
ğŸ“ **Example:** `/password 16`

ğŸ›¡ï¸ *Secure passwords for better security!*"""
        
        # Character sets
        lowercase = string.ascii_lowercase
        uppercase = string.ascii_uppercase
        digits = string.digits
        symbols = "!@#$%^&*()-_+=[]{}|;:,.<>?"
        
        # Ensure at least one character from each set
        password = [
            random.choice(lowercase),
            random.choice(uppercase),
            random.choice(digits),
            random.choice(symbols)
        ]
        
        # Fill the rest randomly
        all_chars = lowercase + uppercase + digits + symbols
        for _ in range(length - 4):
            password.append(random.choice(all_chars))
        
        # Shuffle the password
        random.shuffle(password)
        final_password = ''.join(password)
        
        return f"""ğŸ” **Secure Password Generated**

ğŸ”‘ **Your Password:** `{final_password}`

ğŸ“Š **Strength Metrics:**
â€¢ Length: {length} characters
â€¢ Contains: Letters, Numbers, Symbols
â€¢ Security Level: ğŸŸ¢ High

âš ï¸ **Security Tips:**
â€¢ Don't share this password
â€¢ Use unique passwords for each account
â€¢ Store in a password manager

ğŸ›¡ï¸ *Generated by Kora AI Security Suite*"""
        
    except Exception as e:
        return f"âŒ Error generating password: {str(e)}"
